:root{
  --bg:#0f1214;
  --fg:#e8eef2;
  --muted:#9fb3c8;
  --card:#ffffff;
  --card-fg:#0b1220;
  --chip:#2b3440;
  --chip-on:#2e7d32;
  --chip-off:#374151;
  --accent:#007aff;
  --shadow:0 8px 24px rgba(0,0,0,.25);
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }
body{ background:#e8e8e8; color:#222; font:14px/1.35 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial; }

#map{ width:100%; height:calc(100vh - 64px); background:#ddd; }

/* ===== toolbar ===== */
#toolbar{
  position:sticky; top:0; left:0; right:0; z-index:1000;
  background:var(--bg); color:var(--fg);
  display:flex; align-items:center; justify-content:space-between;
  gap:8px; padding:8px;
  border-bottom:1px solid #0006;
  min-height:64px;
}

.toolbar-left{
  display:flex; align-items:center; gap:6px;
  flex-wrap:wrap;
  overflow-x:auto; -webkit-overflow-scrolling:touch;
  scrollbar-width:thin;
  max-width:62vw;
}
.toolbar-left::-webkit-scrollbar{ height:6px; }
.toolbar-left::-webkit-scrollbar-thumb{ background:#445; border-radius:3px; }

.toolbar-right{
  display:flex; align-items:center; gap:10px;
  margin-left:auto;
  flex:0 0 auto;
}

.toolbar-label{ color:#cbd5e1; margin-right:4px; font-size:13px; }

button{
  border:0; border-radius:10px;
  padding:6px 10px; font-size:13px; cursor:pointer;
  color:#fff; background:var(--chip);
  white-space:nowrap;
}
button.toggle.on{ background:var(--chip-on); }
button.toggle.off{ background:var(--chip-off); color:#cbd5e1; }
button.ghost{ background:#2b2f36; color:#e5e7eb; }
button.primary{ background:var(--accent); }

.opacity-wrap{
  display:flex; align-items:center; gap:6px; color:#cbd5e1; font-size:13px; white-space:nowrap;
}
#opacity{ width:120px; }

#back-link{
  text-decoration:none; padding:6px 10px; border-radius:10px; background:#2b2f36; color:#e5e7eb;
}

/* статус и выбранные параметры — светлые карточки для контраста */
#params, #status{
  background:var(--card);
  color:var(--card-fg);
  padding:6px 10px;
  border-radius:10px;
  box-shadow:var(--shadow);
  max-width:30vw;
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  font-size:13px;
}
#status{ white-space:normal; line-height:1.25; max-width:34vw; }
#status b{ font-weight:700; }

/* Спрятанные слои */
.layer-hidden{ display:none; }

/* ===== tooltip ===== */
#tooltip{
  position:fixed; z-index:1100;
  background:#fff; color:#111; padding:6px 8px; border-radius:8px;
  font-size:12px; box-shadow:var(--shadow);
  pointer-events:none;
  transform:translate(12px, 12px);
}

/* ===== confirm panel ===== */
#confirm-panel{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:10px; z-index:1100;
  background:var(--card); color:var(--card-fg);
  border-radius:14px; padding:10px 12px;
  box-shadow:var(--shadow);
  display:flex; align-items:center; gap:12px;
  max-width:min(92vw, 560px);
}
#confirm-panel .cp-title{ color:#555; font-size:12px; }
#confirm-panel .cp-name{ font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:50vw; }
#confirm-panel .cp-actions{ margin-left:auto; display:flex; gap:8px; }

/* мобильные ужатия */
@media (max-width: 420px){
  #map{ height:calc(100vh - 72px); }
  .toolbar-left{ max-width:58vw; }
  #params, #status{ max-width:46vw; }
}
